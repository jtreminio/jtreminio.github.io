<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> <meta name="description" content="Juan Treminio - Dallas based senior web developer"> <meta name="keywords" content=""> <meta property="og:title" content="Firefox Input Email Validation - Juan Treminio - Senior Web Developer Blog"> <meta property="og:type" content="article"> <meta property="og:description" content="I hope to write more of these short tip-type posts in the future that explain some small thing I’ve run across and how I’ve fixed them. "> <meta property="article:tag" content="html"> <meta property="og:url" content="https://jtreminio.com/blog/firefox-input-email-validation/"> <meta property="og:site_name" content="Juan Treminio - Senior Web Developer Blog"> <title>Firefox Input Email Validation - Juan Treminio - Senior Web Developer Blog</title> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon.ico"/> <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png"> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-96x96.png" sizes="96x96"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-32x32.png" sizes="32x32"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-16x16.png" sizes="16x16"/> <link rel="canonical" href="https://jtreminio.com/blog/firefox-input-email-validation/"> <link href="//cdn.jsdelivr.net/npm/bootstrap-no-fonts-no-js@3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css"/> <link href="//cdnjs.cloudflare.com/ajax/libs/startbootstrap-clean-blog/3.3.7/css/clean-blog.min.css" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/> <script src="//cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script> <link rel="stylesheet" href="/static/css/rouge.css"/> <link rel="stylesheet" href="/static/css/custom.css"/> <link rel="stylesheet" href="/static/css/dark.css" data-dark-style/> </head> <body> <nav class="navbar navbar-default navbar-expand-md navbar-custom navbar-fixed-top is-fixed is-visible"> <div class="container-fluid"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand hidden-xs hidden-sm" href="/">Juan Treminio - Senior Web Developer Blog</a> <a class="navbar-brand visible-xs visible-sm" href="/">Juan Treminio - Developer Blog</a> </div> <div class="collapse navbar-collapse" id="main-navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li><a href="/">Blog</a></li> <li><a href="/about/">About</a></li> <li><a href="/hire-me/">Hire Me</a></li> <li> <a class="btn theme-toggle"> <span class="theme-dark"><i data-feather="moon"></i> Dark Theme</span> <span class="theme-light"><i data-feather="sun"></i> Light Theme</span> </a> </li> </ul> </div> </div> </nav> <header class="intro-header"> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <div class="post-heading"> <h1>Firefox Input Email Validation</h1> <h2 class="subheading">Long-standing bug</h2> <div class="meta">Posted on Oct 31, 2015 <br/> <span> <i data-feather="tag" alt="tags"></i> <a href="/tags#html">html</a> </span> </div> </div> </div> </div> </div> </header> <article> <div class="container"> <div class="row"> <div class="post col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <p>I hope to write more of these short tip-type posts in the future that explain some small thing I’ve run across and how I’ve fixed them.</p> <p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=726758">Firefox has a long-standing bug</a> wherein any <code class="language-plaintext highlighter-rouge">&lt;input type="email" /&gt;</code> field will fail HTML5 validation if there is a space either at the beginning or end of the string.</p> <p>For example, <code class="language-plaintext highlighter-rouge">foo@bar.com</code> will validate fine, but <code class="language-plaintext highlighter-rouge">&lt;space&gt;foo@bar.com</code> and <code class="language-plaintext highlighter-rouge">foo@bar.com&lt;space&gt;</code> will not.</p> <p>This is a small-enough bug that one would think it would have been fixed years ago.</p> <p>Chrome, IE and Safari do not have this issue. Why is Firefox the only stand out in refusing to silently trim user’s input when email?</p> <p>No idea, but the solution is fairly simple:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">keypress</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">input[type="email"]</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">e.keyCode == 32</code> is the space character. If a user enters space in an email input field, it is silently ignored and not inserted. Since spaces are not valid email characters this works fine across all browsers.</p> <p>This does not take into account a user pasting a string containing spaces, nor does it affect auto-fill values like what Chrome offers.</p> <p>You could go around this by doing something like</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">input[type="email"]</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">());</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>but this has the unintended side effect of not letting you edit the non-ending of a string.</p> <p>I have not figured out a way around this small issue as preventing space character is an easy enough solution.</p> <p>Until next time, this is Señor PHP Developer Juan Treminio wishing you adios!</p> <hr class="invisible"> <ul class="pager"> <li class="previous"> <a href="/blog/diy-sit-stand-desk/" data-toggle="tooltip" data-placement="top" title="DIY Sit/Stand Desk"> Previous &rarr;<br> <span>DIY Sit/Stand Desk</span> </a> </li> <li class="next"> <a href="/blog/queues-working-smart-faster-in-parallel/" data-toggle="tooltip" data-placement="top" title="Queues - Working Smarter, Faster and in Parallel"> &larr; Next<br> <span>Queues - Working Smarter, Faster and in Parallel</span> </a> </li> </ul> <hr class="invisible"> <div class="comment"> </div> </div> </div> </div> </article> <footer> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <ul class="list-inline text-center footer-icons"> <li><a href="mailto:jtreminio@gmail.com"><i data-feather="mail"></i></a></li> <li> <a href="https://github.com/jtreminio" target="_blank"> <i data-feather="github"></i> </a> </li> <li> <a href="https://twitter.com/juantreminio" target="_blank"> <i data-feather="twitter"></i> </a> </li> <li> <a href="https://www.linkedin.com/in/jtreminio-1" target="_blank"> <i data-feather="linkedin"></i> </a> </li> </ul> </div> </div> </div> </footer> </body> <script src="/static/js/custom.js"></script> </html>