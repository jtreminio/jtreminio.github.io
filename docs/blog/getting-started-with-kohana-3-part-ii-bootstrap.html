<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="description" content="Juan Treminio - Dallas based senior web developer">
  <meta name="keywords" content="">

  <!-- Open Graph -->
  <meta property="og:title" content="Getting Started with Kohana 3, Part II – Bootstrap - Juan Treminio - Senior Web Developer Blog">
  
  <meta property="og:type" content="article">
  <meta property="og:description" content="
  I am no longer using Kohana in any of my personal or professional
projects. I have moved to a better, more modular framework in Silex, which I will
be writing about shortly. This series has been...">
      
      
  <meta property="article:tag" content="webdev">
      
  <meta property="article:tag" content="kohana">
      
  <meta property="article:tag" content="tutorial">
      
  <meta property="article:tag" content="server">
      
    
  <meta property="og:url" content="https://jtreminio.com/blog/getting-started-with-kohana-3-part-ii-bootstrap">
  <meta property="og:site_name" content="Juan Treminio - Senior Web Developer Blog">

  <title>Getting Started with Kohana 3, Part II – Bootstrap - Juan Treminio - Senior Web Developer Blog</title>

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon.ico" />
  <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-32x32.png" sizes="32x32" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://jtreminio.com/blog/getting-started-with-kohana-3-part-ii-bootstrap">

  <!-- Bootstrap Core CSS -->
  <link href="//cdn.jsdelivr.net/npm/bootstrap-no-fonts-no-js@3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="//cdnjs.cloudflare.com/ajax/libs/startbootstrap-clean-blog/3.3.7/css/clean-blog.min.css" rel="stylesheet" type="text/css" />

  <!-- Custom Fonts -->
  <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
  <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
  <script src="//cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/css/rouge.css" />
  <link rel="stylesheet" href="/static/css/custom.css?1642983746" />
  <link rel="stylesheet" href="/static/css/dark.css?1642983746" data-style="dark" />
</head>

<body>
  <!-- Navigation -->
<nav class="navbar navbar-default navbar-expand-md navbar-custom navbar-fixed-top is-fixed is-visible">
  <div class="container-fluid">
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand hidden-xs hidden-sm" href="/">Juan Treminio - Senior Web Developer Blog</a>
      <a class="navbar-brand visible-xs visible-sm" href="/">Juan Treminio - Developer Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Blog</a></li>
        
          
        
          
        <li><a href="/about">About</a></li>
          
        
          
        
          
        <li><a href="/hire-me">Hire Me</a></li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <li>
          <a class="btn theme-toggle">
            <span class="theme-dark"><i data-feather="moon"></i> Dark Theme</span>
            <span class="theme-light"><i data-feather="sun"></i> Light Theme</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <!-- Post Header -->
<header class="intro-header">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Getting Started with Kohana 3, Part II – Bootstrap</h1>
          <h2 class="subheading">A popular framework tutorial</h2>
          <span class="meta">Posted on Mar 23, 2012
<br />
<i class="feather icon-tag"></i>Tags

<a href="/tags#webdev">webdev</a>,

<a href="/tags#kohana">kohana</a>,

<a href="/tags#tutorial">tutorial</a>,

<a href="/tags#server">server</a>

</span>
        </div>
      </div>
    </div>
  </div>
</header>


<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <div class="post col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <blockquote>
  <p>I am no longer using Kohana in any of my personal or professional
projects. I have moved to a better, more modular framework in Silex, which I will
be writing about shortly. This series has been permanently discontinued.</p>
</blockquote>

<blockquote>
  <p>This is Part II of a multi-part series. Below are the links to other parts of this tutorial!</p>
  <ul>
    <li><a href="/blog/getting-started-with-kohana-3-part-i">Getting Started with Kohana 3, Part I – Initial Setup</a></li>
    <li>Getting Started with Kohana 3, Part II – Bootstrap</li>
    <li><a href="/blog/getting-started-with-kohana-3-part-iii-controller-mvvm-kostache">Getting Started with Kohana 3, Part III – Controller/MVVM/KOstache</a></li>
  </ul>
</blockquote>

<p>In my
<a href="/blog/getting-started-with-kohana-3-part-i">Getting Started with Kohana 3, Part I – Initial Setup</a>,
I walked you through the bare minimum to getting Kohana up and running on your local
server. In this part II, I’ll take you through editing your bootstrap file and
setting up your default router.</p>

<p>I’ve put all the code up on my GitHub account at
<a href="https://github.com/jtreminio/Kohana-3-Tutorial">jtreminio/Kohana-3-Tutorial</a>. Please
feel free to clone and send it pull requests. I will try to keep each chapter in its
own branch, so you can easily follow along.</p>

<h2 id="what-is-the-bootstrap">What is the bootstrap</h2>

<p>The bootstrap is called on every single request to your Kohana application. In it you
can set several options, such as default language, setting your app’s base URL, turning
the index.php in your URL off/on, as well as choosing what, if any, modules you want
to enable. By default routes are also included in this file.</p>

<p>This important file is located at <code class="language-plaintext highlighter-rouge">application/bootstrap.php</code>.</p>

<h2 id="environment-flag">Environment Flag</h2>

<p>Open the bootstrap file and change the following:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ...</span>

<span class="k">if</span> <span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'KOHANA_ENV'</span><span class="p">]))</span>
<span class="p">{</span>
    <span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">=</span> <span class="nb">constant</span><span class="p">(</span><span class="s1">'Kohana::'</span><span class="mf">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'KOHANA_ENV'</span><span class="p">]));</span>
<span class="p">}</span>

<span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">=</span> <span class="k">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'KOHANA_ENV'</span><span class="p">])</span>
    <span class="o">?</span> <span class="nb">constant</span><span class="p">(</span><span class="s1">'Kohana::'</span><span class="mf">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'KOHANA_ENV'</span><span class="p">]))</span>
    <span class="o">:</span> <span class="nc">Kohana</span><span class="o">::</span><span class="no">PRODUCTION</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>What’s happening here is that we’re automatically setting our environment flag.
Remember the <code class="language-plaintext highlighter-rouge">KOHANA_ENV</code> variable you set in your virtual hosts file in part I?
It comes into play now. Kohana comes with 4 environments defined out of the box:
<code class="language-plaintext highlighter-rouge">PRODUCTION</code>, <code class="language-plaintext highlighter-rouge">STAGING</code>, <code class="language-plaintext highlighter-rouge">TESTING</code> and <code class="language-plaintext highlighter-rouge">DEVELOPMENT</code>. You’re welcome to add more
by extending the Core class (more on this in a future article) and adding in
your own constant.</p>

<p>You can easily switch between flags by setting up a different virtual host for
each flag (<code class="language-plaintext highlighter-rouge">kohana-tutorial.dev</code>, <code class="language-plaintext highlighter-rouge">kohana-tutorial.test</code>, etc), or simply changing
the variable value in your one host.</p>

<h2 id="init-flags">Init Flags</h2>

<p>We now move on to the <code class="language-plaintext highlighter-rouge">Kohana::init()</code> settings. These control some rather
important things about your Kohana application. Using the <code class="language-plaintext highlighter-rouge">Kohana::$environment</code>
value we can automatically disable or enable each one. You can read details about
what options you have available, but for now I’ll simply tell you which values
are best changed.</p>

<p><code class="language-plaintext highlighter-rouge">base_url</code> – change this if you have installed Kohana in a subfolder. It’ll
automatically be inserted into all URLs you create using Kohana’s link building
tools.</p>

<p><code class="language-plaintext highlighter-rouge">index_file</code> – This shows or hides the index.php part in your URLs, making them
‘prettier’. As a developer you want to be exposed to as much information of your
app as possible, so you want this <em>on</em> in a non-prod environment.</p>

<p><code class="language-plaintext highlighter-rouge">errors</code> – Should Kohana catch errors in your application and show its’ internal
error_view?</p>

<p><code class="language-plaintext highlighter-rouge">profile</code> – This enables or disables the Kohana Profiler module. Disable on prod.</p>

<p><code class="language-plaintext highlighter-rouge">caching</code> – This is Kohana’s internal caching to help speed up its
<code class="language-plaintext highlighter-rouge">Kohana::find_file()</code> method. It is not the same as cache module that’s inside the
modules folder.</p>

<p>Here’s what your <code class="language-plaintext highlighter-rouge">Kohana::init()</code> should look like:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ...</span>

<span class="nc">Kohana</span><span class="o">::</span><span class="nf">init</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'base_url'</span>    <span class="o">=&gt;</span> <span class="s1">'/'</span><span class="p">,</span>
    <span class="s1">'index_file'</span>  <span class="o">=&gt;</span> <span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">===</span> <span class="nc">Kohana</span><span class="o">::</span><span class="no">PRODUCTION</span><span class="p">,</span>
    <span class="s1">'errors'</span>      <span class="o">=&gt;</span> <span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">!==</span> <span class="nc">Kohana</span><span class="o">::</span><span class="no">PRODUCTION</span><span class="p">,</span>
    <span class="s1">'profile'</span>     <span class="o">=&gt;</span> <span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">!==</span> <span class="nc">Kohana</span><span class="o">::</span><span class="no">PRODUCTION</span><span class="p">,</span>
    <span class="s1">'caching'</span>     <span class="o">=&gt;</span> <span class="nc">Kohana</span><span class="o">::</span><span class="nv">$environment</span> <span class="o">===</span> <span class="nc">Kohana</span><span class="o">::</span><span class="no">PRODUCTION</span><span class="p">,</span>
<span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="routes">Routes</h2>

<p>At the bottom of the bootstrap.php file you’ll see a single route. I have always
been of the opinion that routes do not belong in the bootstrap file – a sufficiently
complex website will have tens, if not hundreds, of routes and they should all be
defined in a separate file.</p>

<p><a href="http://kohanaframework.org/3.2/guide/kohana/routing">Click here to see the official documentation on routing.</a></p>

<p>In this tutorial, I will recommend you move the routes out of the bootstrap and
into their own routes file. Replace the following code in the bootstrap:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ...</span>

<span class="cd">/**
 * Set the routes. Each route must have a minimum of a name, a URI and a set of
 * defaults for the URI.
 */</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">set</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="s1">'(&lt;controller&gt;(/&lt;action&gt;(/&lt;id&gt;)))'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">defaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'controller'</span> <span class="o">=&gt;</span> <span class="s1">'welcome'</span><span class="p">,</span>
        <span class="s1">'action'</span>     <span class="o">=&gt;</span> <span class="s1">'index'</span><span class="p">,</span>
    <span class="p">));</span>

<span class="cd">/**
 * Include separate routes file
 */</span>
<span class="k">require_once</span> <span class="no">APPPATH</span><span class="mf">.</span><span class="s1">'config/routes.php'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Create a new file at <code class="language-plaintext highlighter-rouge">application/config/routes.php</code>, and paste the following:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ...</span>

<span class="cd">/**************************************************************
 * Default Router
 **************************************************************/</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">set</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="s1">'(&lt;controller&gt;(/&lt;action&gt;(/&lt;id&gt;)))'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">defaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'controller'</span> <span class="o">=&gt;</span> <span class="s1">'home'</span><span class="p">,</span>
        <span class="s1">'action'</span>     <span class="o">=&gt;</span> <span class="s1">'index'</span><span class="p">,</span>
    <span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You’ll notice that I’ve changed the ‘controller’ value to ‘home’ – if you reload
your app you’ll get a 404 error. This is because we’ve sent the default controller
and action (class and method) to be <code class="language-plaintext highlighter-rouge">Controller_Home::action_index()</code>. The solution
is to rename <code class="language-plaintext highlighter-rouge">application/classes/controller/welcome.php</code> to
<code class="language-plaintext highlighter-rouge">application/classes/controller/home.php</code> and the class to <code class="language-plaintext highlighter-rouge">Controller_Home</code>. Reload
your page and you’ve got ‘hello, world!’ again!</p>

<h2 id="wrapping-it-up">Wrapping it up</h2>

<p>In this chapter, you want through one of the most important files in the Kohana
stack – the bootstrap. You set some sane values for development and production
environments, as well as moved routes to their own file. We’re slowly deviating away
from the default state of Kohana, which points to one of the strengths of this
framework: the flexibility it offers you to go your own way. Over the coming
chapters you’ll see me move further and further away from the default Kohana
structure and into a more flexible, powerful and modularized framework that’s
still easy to work with.</p>


        <hr class="invisible">

        <ul class="pager">
          
          <li class="previous">
            <a href="/blog/getting-started-with-kohana-3-part-i" data-toggle="tooltip"
               data-placement="top" title="Getting Started with Kohana 3, Part I – Initial Setup">
              Previous &rarr;<br>
              <span>Getting Started with Kohana 3, Part I – Initial Setup</span>
            </a>
          </li>
          
          
          <li class="next">
            <a href="/blog/getting-started-with-kohana-3-part-iii-controller-mvvm-kostache" data-toggle="tooltip"
               data-placement="top" title="Getting Started with Kohana 3, Part III – Controller/MVVM/KOstache">
              &larr; Next<br>
              <span>Getting Started with Kohana 3, Part III – Controller/MVVM/KOstache</span>
            </a>
          </li>
          
        </ul>

        <hr class="invisible">

        
      </div>
    </div>
  </div>
</article>

  <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-icons">
          <li><a href="mailto:jtreminio@gmail.com"><i data-feather="mail"></i></a></li>
          
          <li>
            <a href="https://github.com/jtreminio" target="_blank">
              <i data-feather="github"></i>
            </a>
          </li>
          
          <li>
            <a href="https://twitter.com/juantreminio" target="_blank">
              <i data-feather="twitter"></i>
            </a>
          </li>
          
          <li>
            <a href="https://www.linkedin.com/in/jtreminio-1" target="_blank">
              <i data-feather="linkedin"></i>
            </a>
          </li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>

  <link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" rel="stylesheet" type="text/css" />
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" rel="stylesheet" type="text/css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe.
       It's a separate element, as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides.
      PhotoSwipe keeps only 3 of them in DOM to save memory.
      Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter"></div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--share" title="Share"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>

</body>
<script src="/static/js/custom.js?1642983746"></script>
</html>
