<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> <meta name="description" content="Juan Treminio - Dallas based senior web developer"> <meta name="keywords" content=""> <meta property="og:title" content="Introduction to Vagrant/Puppet and introducing PuPHPet - A simple to use Vagrant/Puppet GUI Configurator! - Juan Treminio - Senior Web Developer Blog"> <meta property="og:type" content="article"> <meta property="og:description" content="I just released the initial version of PuPHPet, my GUI-based generator for Vagrant/Puppet environments! "> <meta property="article:tag" content="vagrant"> <meta property="article:tag" content="puppet"> <meta property="article:tag" content="open-source"> <meta property="article:tag" content="server"> <meta property="article:tag" content="vm"> <meta property="og:url" content="https://jtreminio.com/blog/introduction-to-vagrant-puppet-and-introducing-puphpet-a-simple-to-use-vagrant-puppet-gui-configurator/"> <meta property="og:site_name" content="Juan Treminio - Senior Web Developer Blog"> <title>Introduction to Vagrant/Puppet and introducing PuPHPet - A simple to use Vagrant/Puppet GUI Configurator! - Juan Treminio - Senior Web Developer Blog</title> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon.ico"/> <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png"> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-96x96.png" sizes="96x96"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-32x32.png" sizes="32x32"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-16x16.png" sizes="16x16"/> <link rel="canonical" href="https://jtreminio.com/blog/introduction-to-vagrant-puppet-and-introducing-puphpet-a-simple-to-use-vagrant-puppet-gui-configurator/"> <link href="//cdn.jsdelivr.net/npm/bootstrap-no-fonts-no-js@3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css"/> <link href="//cdnjs.cloudflare.com/ajax/libs/startbootstrap-clean-blog/3.3.7/css/clean-blog.min.css" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/> <script src="//cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script> <link rel="stylesheet" href="/static/css/rouge.css"/> <link rel="stylesheet" href="/static/css/custom.css?1643642128"/> <link rel="stylesheet" href="/static/css/dark.css?1643642128" data-dark-style/> </head> <body> <nav class="navbar navbar-default navbar-expand-md navbar-custom navbar-fixed-top is-fixed is-visible"> <div class="container-fluid"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand hidden-xs hidden-sm" href="/">Juan Treminio - Senior Web Developer Blog</a> <a class="navbar-brand visible-xs visible-sm" href="/">Juan Treminio - Developer Blog</a> </div> <div class="collapse navbar-collapse" id="main-navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li><a href="/">Blog</a></li> <li><a href="/about/">About</a></li> <li><a href="/hire-me/">Hire Me</a></li> <li> <a class="btn theme-toggle"> <span class="theme-dark"><i data-feather="moon"></i> Dark Theme</span> <span class="theme-light"><i data-feather="sun"></i> Light Theme</span> </a> </li> </ul> </div> </div> </nav> <header class="intro-header"> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <div class="post-heading"> <h1>Introduction to Vagrant/Puppet and introducing PuPHPet - A simple to use Vagrant/Puppet GUI Configurator!</h1> <h2 class="subheading">Introduction to Vagrant and Puppet</h2> <div class="meta">Posted on May 14, 2013 <br/> <span> <i data-feather="tag" alt="tags"></i> <a href="/tags#vagrant">vagrant</a>, <a href="/tags#puppet">puppet</a>, <a href="/tags#open-source">open-source</a>, <a href="/tags#server">server</a>, <a href="/tags#vm">vm</a> </span> </div> </div> </div> </div> </div> </header> <article> <div class="container"> <div class="row"> <div class="post col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <p>I just released the initial version of <a href="http://puphpet.com">PuPHPet</a>, my GUI-based generator for Vagrant/Puppet environments!</p> <p>That is a mouthful, so let me explain the what, why and how!</p> <h2 id="what-is-vagrant">What is Vagrant?</h2> <p><a href="http://vagrantup.com">Vagrant</a> is for managing VMs. If you previously read my length tutorial, <a href="/blog/setting-up-a-debian-vm-step-by-step/">Setting Up a Debian VM, Step by Step</a>, you know how tiresome and error-prone setting up a virtual machine can be.</p> <p>Errors suck!</p> <p>Spending time away from developing sucks!</p> <p>Vagrant can help!</p> <p>Vagrant helps abstract and automate the initial setup of a virtual machine. Basically everything from the initial OS setup, to assigning a static IP address and sharing folders between host and slave are handled with a few short lines in Vagrant.</p> <p>Vagrant is also easy to read and understand. Heck, just take a look at my default <a href="https://github.com/jtreminio/vagrant-puppet-lamp/blob/master/Vagrantfile">Vagrantfile</a></p> <ul> <li>even if you have never encountered Vagrant before you can probably pick up on what is going on in that file… mostly, anyway!</li> </ul> <p>It also allows you to boot up, shut down, suspend, reload and package your VM for the command line, all with some very simple, easy to remember commands.</p> <p>Vagrant is great for the basics - but that is as far as you should use it, only for the initial set up. For more complicated tasks like installing software packages, configuring installed packages, setting up users, creating MySQL tables and more, you should use what Vagrant calls provisioners. Out of the box, Vagrant has support for shell (basically <code class="language-plaintext highlighter-rouge">sh</code> files), <a href="http://www.opscode.com/chef/">Chef</a> and <a href="https://puppetlabs.com/">Puppet</a>. You are free to use any provisioner you want - at the end of the day they all end up doing the same thing - but I have chosen to go with Puppet.</p> <h2 id="what-is-puppet">What is Puppet?</h2> <p><a href="https://puppetlabs.com/">Puppet</a> is one of the main provisioners available to Vagrant. I will not explain the differences between Puppet and Chef here, but Google will keep you occupied for hours on the subject!</p> <p>From the Puppet website,</p> <blockquote class="info"> <p>Puppet uses its own configuration language, which was designed to be accessible to sysadmins.</p> </blockquote> <p><a href="https://github.com/jtreminio/vagrant-puppet-lamp/blob/master/manifests/default.pp">Here you can see an example of Puppet’s configuration language</a>.</p> <p>Easy to understand at first glance, moderately-to-very hard to master, and very powerful once it “clicks” for you.</p> <p>You can see that Puppet comprises the bulk of your server configuration. It handles package installation,</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="n">package</span> <span class="p">{</span> <span class="p">[</span><span class="s1">'gcc'</span><span class="p">,</span> <span class="s1">'make'</span><span class="p">,</span> <span class="s1">'python-software-properties'</span><span class="p">,</span>
           <span class="s1">'vim'</span><span class="p">,</span> <span class="s1">'curl'</span><span class="p">,</span> <span class="s1">'git'</span><span class="p">,</span> <span class="s1">'subversion'</span><span class="p">]</span> <span class="p">:</span>
    <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="s1">'installed'</span><span class="p">,</span>
    <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Exec</span><span class="p">[</span><span class="s1">'apt-get update'</span><span class="p">],</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>It can process tasks like creating virtual hosts in Apache,</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'invoise'</span> <span class="p">:</span>
    <span class="py">server_name</span>   <span class="p">=&gt;</span> <span class="s1">'invoise.dev'</span><span class="p">,</span>
    <span class="py">serveraliases</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'www.invoise.dev'</span><span class="p">],</span>
    <span class="py">docroot</span>       <span class="p">=&gt;</span> <span class="s1">'/var/www/invoi.se/web'</span><span class="p">,</span>
    <span class="py">port</span>          <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
    <span class="py">priority</span>      <span class="p">=&gt;</span> <span class="s1">'1'</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>Heck, you can even set up MySQL root users!</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="p">{</span> <span class="s1">'mysql'</span> <span class="p">:</span>
    <span class="py">root_password</span> <span class="p">=&gt;</span> <span class="nv">$mysql_root_password</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>Puppet takes the long, arduous process of making your virtual machine <em>useful</em> and automates it away!</p> <h2 id="so-why-use-vagrantpuppet-over-manual-vm-management">So why use Vagrant/Puppet over manual VM management?</h2> <p>Managing a VM is hard! Let’s go shopping!</p> <p>I am a developer focused on PHP by trade. I am not a server admin. I do not want to worry about having to keep my VM running properly, keeping packages up to date, having to spend time Googling why package X isn’t installing. What I really want to do is get my environment set up as quickly as possible and get back to facerolling on my keyboard!</p> <p>What I was running a manual VM, everytime I installed a new package I was worried that it may screw up the machine in some way, and I would have to start over from scratch, wasting many hours. Several times I even ran into the issue where <code class="language-plaintext highlighter-rouge">apt-get</code> would stop working completely! How do I fix that?!</p> <p>Thanks to Vagrant, I no longer have to worry about screwing my VM up. If I do change something in some way that is not easily reverted, I simply shrug, <code class="language-plaintext highlighter-rouge">$ vagrant destroy</code> and <code class="language-plaintext highlighter-rouge">$ vagrant up</code> and having a brand new, working VM within 3 minutes. I no longer have to tip-toe, making sure not to disturb anything. It’s the ultimate VM neuralyzer!</p> <p>Sharing my setup with coworkers, or strangers on the internet, is now as simple as pointing them to my Github repo and having them clone it. It is less than 1MB of files and within 10 minutes they can have an exact duplicate of my environment running on their machines! Awesomesauce!</p> <p>This is much preferable to having to upload a multi-gig vbox file and them having to download it, open it in Virtualbox and running it… and possibly keeping multiple copies saved in case they screw one copy up!</p> <h2 id="but-vagrant-lacks-documentation-and-puppet-is-hard-to-learn">But, Vagrant lacks documentation and Puppet is hard to learn!</h2> <p>Over the past 2 weeks I have spent many frustrating hours trying to learn this new technology.</p> <p>Vagrant is actively pushing version 2 (1.1.x), but doesn’t have a complete listing of all availabe API properties anywhere. The concepts are simple enough, and the code is clean enough that you can quickly pick everything up and immediately start using it, but if they don’t actually list what is available you will never be able to get anywhere!</p> <p>Vagrant also has non-official boxes created by users around the world. This is great and can potentially speed up your process, except that many of the available boxes are badly made. For instance, I setup my Vagrantfile to use a pre-built Debian box from <a href="http://vagrantbox.es">vagrantbox.es</a>. I wasted many hours trying to get the VM to load my shared folders without any success, before realizing that the box I was using wasn’t setup right! Switching to an official box immediately solved the problem.</p> <p>Puppet is very powerful. It has clean syntax, a range of options available to you basically handle every possible scenario you may ever come across. The problem is that Puppet is non-linear: it will not simply process commands in the order they are defined! It semi-randomly chooses what command to run, and then runs it. This causes problems when it tries to install Xdebug, but has not installed PHP yet! The Puppet way of solving this is to define what each command’s requirements are, and it steps back until it reachs the parent and then executes.</p> <p>For example, Xdebug depends on PECL, which depends on PEAR, which depends on PHP, which may or may not have been defined as PHP 5.4, which would require <code class="language-plaintext highlighter-rouge">apt-get</code> to have added a custom PPA and then run <code class="language-plaintext highlighter-rouge">apt-get update</code>.</p> <p>It is a web of requirements that at first glance may be a little hard to decypher. In fact, there are many hairs yanked out of my head that are laying on the ground around my desk thanks to Puppet.</p> <p>Once it ‘clicks’, though, it makes perfect sense and is much easier to manage. The trouble is the journey to understanding, of course!</p> <h2 id="puphpet-takes-the-pain-suffering-and-yanked-hairs-away">PuPHPet takes the pain, suffering and yanked hairs away!</h2> <p>Enter <a href="http://puphpet.com">PuPHPet</a>, my GUI configurator. I have created a simple, easy to use web app that targets PHP developers and the classic LAMP stack. You will not need to learn the ins and outs of Vagrant or Puppet to build your own working VM to your specific needs.</p> <p>As of now you can define things like custom virtual hosts, what version of PHP to install, set up some MySQL databases, etc, all without having to touch a manifest file.</p> <p>It also comes with popular PHP-focused tools, like PEAR and Xdebug out of the box. In fact, you can immediately set a breakpoint in the code and the server will pick up the connection!</p> <p>As this is the initial release, options are fairly limited. For example, in the future I want to provide the option to choose either Apache, Nginx or PHP’s built-in web server. Also MySQL vs MariaDB, PostgreSQL, MongoDB and other no-SQLs, etc.</p> <p>For now, however, the few options that are available work and you can get up and running in 5 minutes flat!</p> <p>It is <a href="https://github.com/jtreminio/Puphpet">completely open-sourced</a> and I would be elated to receive pull requests!</p> <hr class="invisible"> <ul class="pager"> <li class="previous"> <a href="/blog/unit-testing-tutorial-part-v-mock-methods-and-overriding-constructors/" data-toggle="tooltip" data-placement="top" title="Unit Testing Tutorial Part V: Mock Methods and Overriding Constructors"> Previous &rarr;<br> <span>Unit Testing Tutorial Part V: Mock Methods and Overriding Constructors</span> </a> </li> <li class="next"> <a href="/blog/make-vagrant-up-yours/" data-toggle="tooltip" data-placement="top" title="Make $ vagrant up yours"> &larr; Next<br> <span>Make $ vagrant up yours</span> </a> </li> </ul> <hr class="invisible"> <div class="comment"> </div> </div> </div> </div> </article> <footer> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <ul class="list-inline text-center footer-icons"> <li><a href="mailto:jtreminio@gmail.com"><i data-feather="mail"></i></a></li> <li> <a href="https://github.com/jtreminio" target="_blank"> <i data-feather="github"></i> </a> </li> <li> <a href="https://twitter.com/juantreminio" target="_blank"> <i data-feather="twitter"></i> </a> </li> <li> <a href="https://www.linkedin.com/in/jtreminio-1" target="_blank"> <i data-feather="linkedin"></i> </a> </li> </ul> </div> </div> </div> </footer> </body> <script src="/static/js/custom.js?1643642128"></script> </html>