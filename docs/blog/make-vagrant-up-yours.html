<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> <meta name="description" content="Juan Treminio - Dallas based senior web developer"> <meta name="keywords" content=""> <meta property="og:title" content="Make $ vagrant up yours - Juan Treminio - Senior Web Developer Blog"> <meta property="og:type" content="article"> <meta property="og:description" content="Vagrant is a command line tool to manage virtual machines. Puppet is a command line tool to install software on virtual machines. PuPHPet is an unpronounceable GUI tool to help take the pain out of..."> <meta property="article:tag" content="vagrant"> <meta property="article:tag" content="puppet"> <meta property="article:tag" content="puphpet"> <meta property="article:tag" content="open-source"> <meta property="article:tag" content="server"> <meta property="article:tag" content="vm"> <meta property="og:url" content="https://jtreminio.com/blog/make-vagrant-up-yours"> <meta property="og:site_name" content="Juan Treminio - Senior Web Developer Blog"> <title>Make $ vagrant up yours - Juan Treminio - Senior Web Developer Blog</title> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon.ico"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-96x96.png" sizes="96x96"/> <link rel="shortcut icon" type="image/png" href="/static/favicon/favicon-32x32.png" sizes="32x32"/> <link rel="canonical" href="https://jtreminio.com/blog/make-vagrant-up-yours"> <link href="//cdn.jsdelivr.net/npm/bootstrap-no-fonts-no-js@3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css"/> <link href="//cdnjs.cloudflare.com/ajax/libs/startbootstrap-clean-blog/3.3.7/css/clean-blog.min.css" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/> <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/> <script src="//cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script> <link rel="stylesheet" href="/static/css/rouge.css"/> <link rel="stylesheet" href="/static/css/custom.css?1642999448"/> <link rel="stylesheet" href="/static/css/dark.css?1642999448" data-dark-style/> </head> <body> <nav class="navbar navbar-default navbar-expand-md navbar-custom navbar-fixed-top is-fixed is-visible"> <div class="container-fluid"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand hidden-xs hidden-sm" href="/">Juan Treminio - Senior Web Developer Blog</a> <a class="navbar-brand visible-xs visible-sm" href="/">Juan Treminio - Developer Blog</a> </div> <div class="collapse navbar-collapse" id="main-navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li><a href="/">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="/hire-me">Hire Me</a></li> <li> <a class="btn theme-toggle"> <span class="theme-dark"><i data-feather="moon"></i> Dark Theme</span> <span class="theme-light"><i data-feather="sun"></i> Light Theme</span> </a> </li> </ul> </div> </div> </nav> <header class="intro-header"> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <div class="post-heading"> <h1>Make $ vagrant up yours</h1> <h2 class="subheading">My conference virtualization presentation</h2> <span class="meta">Posted on Jun 29, 2013 <br/> <i class="feather icon-tag"></i>Tags <a href="/tags#vagrant">vagrant</a>, <a href="/tags#puppet">puppet</a>, <a href="/tags#puphpet">puphpet</a>, <a href="/tags#open-source">open-source</a>, <a href="/tags#server">server</a>, <a href="/tags#vm">vm</a> </span> </div> </div> </div> </div> </header> <article> <div class="container"> <div class="row"> <div class="post col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <p><a href="http://vagrantup.com">Vagrant</a> is a command line tool to manage virtual machines. <a href="https://puppetlabs.com">Puppet</a> is a command line tool to install software on virtual machines. <a href="https://puphpet.com">PuPHPet</a> is an unpronounceable GUI tool to help take the pain out of working with both!</p> <h2 id="why-should-i-use-a-virtual-machine">Why should I use a virtual machine?</h2> <p>Being a PHP developer has a much lower barrier to entry than Python, Ruby. Only Javascript is easier to start with. Tools such as XAMPP, MAMP, Homebrew, etc, make installing a basic LAMP stack on your computer extremely easy.</p> <p>So why would you want to give this up and use a slow, bulky and cryptic virtual machine?</p> <h3 id="some-tools-are-difficult-to-install">Some tools are difficult to install</h3> <p>I used to develop using XAMPP on Windows. Attempting to install any PEAR packages would cause my hair to fall out. PEAR is old, it should work 100% of the time.</p> <p>If PEAR is no problem for you, think about how involved tools like memcached, APC, Gearman, etc, are to install on a proper server and then think about the steps that may require to be different on a non-server OS.</p> <h3 id="some-programs-on-your-daily-os-may-interfere">Some programs on your daily OS may interfere</h3> <p>Did you know Skype uses port 80 by default, unless you tell it otherwise? What other programs that you use may interfere in unknown ways with a server?</p> <h3 id="it-works-on-my-machine">It works on my machine</h3> <p>Nothing makes me go into table-flipping mode faster than this phrase. Eliminate inconsistencies between your development environment and your production environment by mimicking prod as close as possible.</p> <h2 id="what-is-vagrant">What is Vagrant?</h2> <p>Simply put, Vagrant makes virtual machines disposable items. It helps you create a new VM from the ground up, and allows you to destroy it at will.</p> <h3 id="why-not-manually-manage-a-virtual-machine">Why not manually manage a virtual machine?</h3> <p>A year or so ago I wrote a long-winded tutorial on setting up a Debian virtual machine using Virtualbox. It has over 30 steps, takes over 15 minutes to complete from start to finish (after you’ve done it several times), and is error prone because people fat-finger their keyboards.</p> <p>Every time I needed to make a change on the virtual machine I would walk on egg shells. If you screw your system up, and you will, you have to start over from scratch. It’s a huge pain in the butt.</p> <p>There’s also no way for me share my VM with other people, unless I want to upload a 1GB file to the internet, not once but everytime I change something on it.</p> <h2 id="enter-vagrant">Enter Vagrant</h2> <p>A vagrant file is really just a single, small, easy to understand text file called … “Vagrantfile”.</p> <p>You start by deciding what operating system you want to use. The official ones are all Ubuntu flavors, in both 32 and 64 bit architectures, but there’s a ton of operating systems to choose, from Debian to CentOS, to more esoteric ones like Amazon, DigitalOcean and Rackspace.</p> <p>The operating systems must come in prepackaged files called boxes. They’re basically minimal images using the VM provider of your choice (VirtualBox, VMWare, and others).</p> <p>Boxes, get it? Vagrants (homeless people) live in boxes? Classy!</p> <p>A typical, minimalistic Vagrantfile may look like</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">box</span> <span class="o">=</span> <span class="s2">"precise64"</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">box_url</span> <span class="o">=</span> <span class="s2">"http://files.vagrantup.com/precise64.box"</span>

    <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">network</span> <span class="ss">:private_network</span><span class="p">,</span> <span class="ss">ip: </span><span class="s2">"192.168.56.101"</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">ssh</span><span class="p">.</span><span class="nf">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">synced_folder</span> <span class="s2">"~/www"</span><span class="p">,</span> <span class="s2">"/var/www"</span><span class="p">,</span> <span class="ss">id: </span><span class="s2">"vagrant-root"</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>Here we have named our box, <code class="language-plaintext highlighter-rouge">precise64</code>, we have told Vagrant where to download the box if it has not done so before, <code class="language-plaintext highlighter-rouge">http://files.vagrantup.com/precise64.box</code>, we give the box its own local IP address, <code class="language-plaintext highlighter-rouge">192.168.56.101</code>, and we set up shared folders between our operating system <code class="language-plaintext highlighter-rouge">~/www</code> and the VM <code class="language-plaintext highlighter-rouge">/var/www</code></p> <h3 id="kick-it-off">Kick it off</h3> <p>To get Vagrant working, you simply open the terminal, <code class="language-plaintext highlighter-rouge">cd</code> into the folder where the Vagrantfile is located and run <code class="language-plaintext highlighter-rouge">$ vagrant up</code>.</p> <div class="text-center"> <figure class="img-thumbnail"> <a href="/static/post/2013-06-29-make-vagrant-up-yours/1.png"> <img style="max-width: 100%; height: auto;" src="/static/post/2013-06-29-make-vagrant-up-yours/1.png" width="300px"/> <figcaption> <small>1.png</small> </figcaption> </a> </figure> </div> <p>You now have a fully functional virtual machine! What, you don’t see it? That’s because it’s invisible by default! To access your new VM, just <code class="language-plaintext highlighter-rouge">$ vagrant ssh</code> and Vagrant will connect you to your VM via SSH.</p> <p>You can check to see that the shared folders are actually set up:</p> <div class="text-center"> <figure class="img-thumbnail"> <a href="/static/post/2013-06-29-make-vagrant-up-yours/2.png"> <img style="max-width: 100%; height: auto;" src="/static/post/2013-06-29-make-vagrant-up-yours/2.png" width="300px"/> <figcaption> <small>2.png</small> </figcaption> </a> </figure> </div> <p>MAGIC!</p> <h3 id="well-thats-a-neat-trick-but">Well, that’s a neat trick, but…</h3> <p>Great, you’ve got a VM up and running… now what? How do you make it useful? You need Apache, PHP, MySQL, XDebug, XHProf! Or Nginx, Postgresql, MongoDB!</p> <p>You <em>could</em> install everything by hand, but that sounds like work and no one likes to work!</p> <h2 id="puppet">Puppet</h2> <p>To handle installing software on your VM, there are several tools available to you, including Puppet, Chef, Salt, or god forbid straight terminal commands and bash scripts.</p> <p>I like Puppet. Why? Because I Chef is geared more toward people familiar with Ruby, I couldn’t get Salt’s hello world working, and terminal commands are hard to maintain. Puppet is powerful, logical and appears to be favored more by true dev ops (of which I am not one).</p> <h3 id="what-exactly-does-puppet-do">What exactly does Puppet do?</h3> <p>Puppet uses a DSL, which is a fancy term for, “This language we invented”, to install software.</p> <p>It’s fairly simple to understand. To install Apache, for example, you would do:</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nc">Package</span> <span class="p">{</span> <span class="s1">'apache2'</span><span class="p">:</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <div class="text-center"> <figure class="img-thumbnail"> <a href="/static/post/2013-06-29-make-vagrant-up-yours/3.png"> <img style="max-width: 100%; height: auto;" src="/static/post/2013-06-29-make-vagrant-up-yours/3.png" width="300px"/> <figcaption> <small>3.png</small> </figcaption> </a> </figure> </div> <p>We can go to the IP address we’ve assigned the VM to test that Apache is installed:</p> <div class="text-center"> <figure class="img-thumbnail"> <a href="/static/post/2013-06-29-make-vagrant-up-yours/4.png"> <img style="max-width: 100%; height: auto;" src="/static/post/2013-06-29-make-vagrant-up-yours/4.png" width="300px"/> <figcaption> <small>4.png</small> </figcaption> </a> </figure> </div> <h3 id="puppet-modules">Puppet Modules</h3> <p>Out of the box, Puppet can install almost any package for you using <code class="language-plaintext highlighter-rouge">Package { 'PACKAGE_NAME': }</code>. However, to do more complex setup you’ll want to install modules.</p> <p>Puppet modules are similar to PHP libraries. Think of Zend_Db, or the Symfony YAML library. Just as how these libraries do one thing, Puppet modules help with one task.</p> <p>There’s a many Puppet Apache modules, for example. They can help you set up vhosts, enable or disable Apache modules, and change configuration settings. A PHP module can help you choose which PHP version to install, set up ini settings, install PECL modules, etc.</p> <p>Puppet modules are written by users and shared with others. An example of setting up an Apache vhost may look like</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'puphpet'</span><span class="p">:</span>
  <span class="py">server_name</span>   <span class="p">=&gt;</span> <span class="s1">'puphpet.dev'</span><span class="p">,</span>
  <span class="py">serveraliases</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'www.puphpet.dev'</span><span class="p">],</span>
  <span class="py">docroot</span>       <span class="p">=&gt;</span> <span class="s1">'/var/www/puphpet.dev/web'</span><span class="p">,</span>
  <span class="py">port</span>          <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">priority</span>      <span class="p">=&gt;</span> <span class="s1">'1'</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>However, since each module can be written by somebody different, the exact details may change between them.</p> <h2 id="downsides-of-puppet">Downsides of Puppet</h2> <h3 id="puppet-is--finicky">Puppet is … finicky.</h3> <p>It does not execute lines in order. It will randomly choose a path through your instructions and try to do things as it wants (kind of). The way you write Puppet instructions are with depend flags. For example, if you want to install PHP PEAR, you have to tell Puppet that PEAR depends on PHP. Before you set up an Apache vhost, you have to ensure that Apache itself is installed.</p> <p>The Puppet workflow can be a bit confusing at first for people new to Puppet. However, if you stick with it there will come a time when the concept “clicks” in your head and you will realize how truly powerful and convinient this method is.</p> <h3 id="puppet-uses-its-own-language">Puppet uses its own language</h3> <p>While Puppet’s language is not difficult to pick up, there are some nuances you must come to understand, else you will be bumping your head against a wall out of frustration. Thankfully, Puppet’s API documentation is excellent!</p> <h3 id="sometimes-puppet-errors-are-cryptic">Sometimes Puppet errors are cryptic</h3> <p>Until you come to understand how Puppet works, some of its error messages may leave you scratching your head.</p> <h2 id="a-sample-puppet-manifest">A sample Puppet manifest</h2> <p>A manifest is simply the file where you define what you want your VM to have. Here is a simple sample one:</p> <div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
</pre></td><td class="rouge-code"><pre><span class="n">exec</span> <span class="p">{</span> <span class="s1">'apt-get update'</span><span class="p">:</span>
  <span class="py">command</span> <span class="p">=&gt;</span> <span class="s1">'apt-get update'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/usr/bin/'</span><span class="p">,</span>
  <span class="py">timeout</span> <span class="p">=&gt;</span> <span class="m">60</span><span class="p">,</span>
  <span class="py">tries</span>   <span class="p">=&gt;</span> <span class="m">3</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'apt'</span><span class="p">:</span>
  <span class="py">always_apt_update</span> <span class="p">=&gt;</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="n">package</span> <span class="p">{</span> <span class="p">[</span><span class="s1">'build-essential'</span><span class="p">,</span> <span class="s1">'python-software-properties'</span><span class="p">,</span> <span class="s1">'puppet-lint'</span><span class="p">,</span>
           <span class="s1">'vim'</span><span class="p">,</span> <span class="s1">'curl'</span><span class="p">,</span> <span class="s1">'zip'</span><span class="p">]:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="s1">'installed'</span><span class="p">,</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Exec</span><span class="p">[</span><span class="s1">'apt-get update'</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">file</span> <span class="p">{</span> <span class="s1">'/home/vagrant/.bash_aliases'</span><span class="p">:</span>
  <span class="py">source</span> <span class="p">=&gt;</span> <span class="s1">'puppet:///modules/puphpet/dot/.bash_aliases'</span><span class="p">,</span>
  <span class="py">ensure</span> <span class="p">=&gt;</span> <span class="s1">'present'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apt::ppa</span> <span class="p">{</span> <span class="s1">'ppa:ondrej/php5'</span><span class="p">:</span>
  <span class="kp">before</span>  <span class="p">=&gt;</span> <span class="nc">Class</span><span class="p">[</span><span class="s1">'php'</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">git::repo</span> <span class="p">{</span> <span class="s1">'puphpet'</span><span class="p">:</span>
  <span class="py">path</span>   <span class="p">=&gt;</span> <span class="s1">'/var/www/puphpet.dev/'</span><span class="p">,</span>
  <span class="py">source</span> <span class="p">=&gt;</span> <span class="s1">'https://github.com/jtreminio/Puphpet.git'</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Apt</span><span class="p">::</span><span class="nc">Ppa</span><span class="p">[</span><span class="s1">'ppa:ondrej/php5'</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">apache::dotconf</span> <span class="p">{</span> <span class="s1">'custom'</span><span class="p">:</span>
  <span class="py">content</span> <span class="p">=&gt;</span> <span class="s1">'EnableSendfile Off'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::module</span> <span class="p">{</span> <span class="s1">'rewrite'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'puphpet'</span><span class="p">:</span>
  <span class="py">server_name</span>   <span class="p">=&gt;</span> <span class="s1">'puphpet.dev'</span><span class="p">,</span>
  <span class="py">serveraliases</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'www.puphpet.dev'</span><span class="p">],</span>
  <span class="py">docroot</span>       <span class="p">=&gt;</span> <span class="s1">'/var/www/puphpet.dev/web'</span><span class="p">,</span>
  <span class="py">port</span>          <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">priority</span>      <span class="p">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
  <span class="kp">require</span>       <span class="p">=&gt;</span> <span class="nc">Git</span><span class="p">::</span><span class="nc">Repo</span><span class="p">[</span><span class="s1">'puphpet'</span><span class="p">]</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'php'</span><span class="p">:</span>
  <span class="py">service</span> <span class="p">=&gt;</span> <span class="s1">'apache'</span><span class="p">,</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Package</span><span class="p">[</span><span class="s1">'apache'</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">php::module</span> <span class="p">{</span> <span class="s1">'php5-cli'</span><span class="p">:</span> <span class="p">}</span>
<span class="n">php::module</span> <span class="p">{</span> <span class="s1">'php5-curl'</span><span class="p">:</span> <span class="p">}</span>
<span class="n">php::module</span> <span class="p">{</span> <span class="s1">'php5-intl'</span><span class="p">:</span> <span class="p">}</span>
<span class="n">php::module</span> <span class="p">{</span> <span class="s1">'php5-mcrypt'</span><span class="p">:</span> <span class="p">}</span>
<span class="n">php::module</span> <span class="p">{</span> <span class="s1">'php5-mysql'</span><span class="p">:</span> <span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'php::pear'</span><span class="p">:</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Class</span><span class="p">[</span><span class="s1">'php'</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'php::devel'</span><span class="p">:</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Class</span><span class="p">[</span><span class="s1">'php'</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'php::composer'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">php::composer::run</span> <span class="p">{</span> <span class="s1">'puphpet'</span><span class="p">:</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/puphpet.dev/'</span><span class="p">,</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Git</span><span class="p">::</span><span class="nc">Repo</span><span class="p">[</span><span class="s1">'puphpet'</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">php::ini</span> <span class="p">{</span> <span class="s1">'default'</span><span class="p">:</span>
  <span class="py">value</span>  <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'date.timezone = America/Chicago'</span><span class="p">,</span>
    <span class="s1">'display_errors = On'</span><span class="p">,</span>
    <span class="s1">'error_reporting = -1'</span>
  <span class="p">],</span>
  <span class="py">target</span> <span class="p">=&gt;</span> <span class="s1">'error_reporting.ini'</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'xdebug'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">xdebug::config</span> <span class="p">{</span> <span class="s1">'cgi'</span><span class="p">:</span> <span class="p">}</span>
<span class="n">xdebug::config</span> <span class="p">{</span> <span class="s1">'cli'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">php::pecl::module</span> <span class="p">{</span> <span class="s1">'xhprof'</span><span class="p">:</span>
  <span class="py">use_package</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'xhprof'</span><span class="p">:</span>
  <span class="py">server_name</span> <span class="p">=&gt;</span> <span class="s1">'xhprof'</span><span class="p">,</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/xhprof/xhprof_html'</span><span class="p">,</span>
  <span class="py">port</span>        <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">priority</span>    <span class="p">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
  <span class="kp">require</span>     <span class="p">=&gt;</span> <span class="nc">Php</span><span class="p">::</span><span class="nc">Pecl</span><span class="p">::</span><span class="nc">Module</span><span class="p">[</span><span class="s1">'xhprof'</span><span class="p">]</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div> <p>In 100 lines, you’ve installed several server tools (<code class="language-plaintext highlighter-rouge">build-essential</code>, <code class="language-plaintext highlighter-rouge">python-software-properties</code>, <code class="language-plaintext highlighter-rouge">puppet-lint</code>, <code class="language-plaintext highlighter-rouge">vim</code>, <code class="language-plaintext highlighter-rouge">curl</code>, <code class="language-plaintext highlighter-rouge">zip</code>), created a <code class="language-plaintext highlighter-rouge">.bash_aliases</code> file, installed Apache, set up 2 vhosts, installed pHP 5.4 along with 5 PHP modules, installed PEAR, XDebug, XHProf and Composer. Simple, right?</p> <p>Well, kind of…</p> <h2 id="a-tool-born-out-of-frustration">A tool born out of frustration</h2> <p>I using Vagrant and Puppet with the intention of only learning the minimum necessary to get a PHP 5.4 server with Apache, a few vhosts and MySQL up and running. This quickly devolved into an exercises in frustration. Many a table were flipped. As soon as I “got” one thing, several more popped up to block my way forward. I am a PHP-focused developer, I wasn’t very interested in learning how to manage my own server using these tools - I simply wanted to consume.</p> <p>Once I got to the point of getting a working server with most everything I wanted, I realized I didn’t want to go through this whole process again in the future, and I wanted to save other people the headaches I experienced. And so, PuPHPet was born.</p> <p>Get it, Puppet + PHP = PuPHPet?</p> <h2 id="puphpet">PuPHPet!</h2> <p><a href="https://puphpet.com">PuPHPet</a> is a web-based GUI to help you configure a Vagrant/Puppet virtual machine in seconds with the most common options. You simply choose your settings, check a few boxes and download a generated zip file containing your customized Vagrantfile and Puppet manifest, along with the required Puppet modules.</p> <p>It’s completely open source, free to use and fork. I am gladly accepting pull requests!</p> <p>You can even run a copy of <a href="https://puphpet.com">PuPHPet.com</a> on your local machine by creating a VM using PuPHPet. That’s kind of like inception, right? It requires PHP 5.4, and soon 5.5. Why? Because we control the full stack of its tools, so why not?</p> <p>Upcoming features include things like deploying to different hosting providers like <a href="https://www.digitalocean.com/?refcode=475274cc0939">Digital Ocean</a> and Amazon, installing non-PHP tools like Ruby, Python, Node.js, etc, and adding more and more PHP-related features. Eventually it may even be able to write your code for you.</p> <hr class="invisible"> <ul class="pager"> <li class="previous"> <a href="/blog/introduction-to-vagrant-puppet-and-introducing-puphpet-a-simple-to-use-vagrant-puppet-gui-configurator" data-toggle="tooltip" data-placement="top" title="Introduction to Vagrant/Puppet and introducing PuPHPet - A simple to use Vagrant/Puppet GUI Configurator!"> Previous &rarr;<br> <span>Introduction to Vagrant/Puppet and introducing PuPHPet - A simple to use Vagrant/Puppet GUI Configurator!</span> </a> </li> <li class="next"> <a href="/blog/diy-sit-stand-desk" data-toggle="tooltip" data-placement="top" title="DIY Sit/Stand Desk"> &larr; Next<br> <span>DIY Sit/Stand Desk</span> </a> </li> </ul> <hr class="invisible"> <div class="comment"> <script src="//utteranc.es/client.js" repo="jtreminio/jtreminio.github.io" issue-number="" theme="github-light" crossorigin="anonymous" async> </script> </div> </div> </div> </div> </article> <footer> <div class="container"> <div class="row"> <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <ul class="list-inline text-center footer-icons"> <li><a href="mailto:jtreminio@gmail.com"><i data-feather="mail"></i></a></li> <li> <a href="https://github.com/jtreminio" target="_blank"> <i data-feather="github"></i> </a> </li> <li> <a href="https://twitter.com/juantreminio" target="_blank"> <i data-feather="twitter"></i> </a> </li> <li> <a href="https://www.linkedin.com/in/jtreminio-1" target="_blank"> <i data-feather="linkedin"></i> </a> </li> </ul> </div> </div> </div> </footer> <link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" rel="stylesheet" type="text/css"/> <link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" rel="stylesheet" type="text/css"/> <script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js"></script> <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"> <div class="pswp__bg"></div> <div class="pswp__scroll-wrap"> <div class="pswp__container"> <div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div> </div> <div class="pswp__ui pswp__ui--hidden"> <div class="pswp__top-bar"> <div class="pswp__counter"></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button> <div class="pswp__preloader"> <div class="pswp__preloader__icn"> <div class="pswp__preloader__cut"> <div class="pswp__preloader__donut"></div> </div> </div> </div> </div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"> <div class="pswp__share-tooltip"></div> </div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"> </button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"> </button> <div class="pswp__caption"> <div class="pswp__caption__center"></div> </div> </div> </div> </div> </body> <script src="/static/js/custom.js?1642999448"></script> </html>